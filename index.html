<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cracked Tiers</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
      margin: 0;
      padding: 0;
    }
    header {
      background: #222;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }
    header img {
      height: 40px;
    }
    header input {
      padding: 5px 10px;
      border-radius: 5px;
      border: none;
      outline: none;
    }
    .filter-bar {
      display: flex;
      justify-content: center;
      gap: 15px;
      background: #333;
      padding: 10px;
      margin-top: 60px;
      position: sticky;
      top: 60px;
      z-index: 999;
    }
    .filter-item {
      cursor: pointer;
      padding: 5px 10px;
      background: #444;
      border-radius: 5px;
    }
    .filter-count {
      font-size: 12px;
      color: yellow;
      margin-left: 5px;
    }
    .players-container {
      padding: 20px;
    }
    .player-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #222;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
    }
    .player-row.highlight {
      border: 2px solid gold;
      background: #333;
    }
    .player-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .player-info img.skin {
      width: 40px;
      height: 40px;
      border-radius: 5px;
    }
    .player-name {
      display: flex;
      flex-direction: column;
    }
    .player-name .name {
      font-weight: bold;
    }
    .player-name .region {
      color: red;
      font-weight: bold;
    }
    .player-name .overall {
      font-size: 13px;
      color: #ccc;
    }
    .gamemodes {
      display: flex;
      gap: 10px;
    }
    .gamemode-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 12px;
    }
    .gamemode-item img {
      width: 24px;
      height: 24px;
    }
    .tier-badge {
      font-size: 11px;
      color: #0f0;
    }
    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #222;
      padding: 20px;
      border-radius: 10px;
      z-index: 2000;
      width: 300px;
      color: white;
    }
    .modal.active {
      display: block;
    }
    .modal-backdrop {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      z-index: 1500;
    }
    .modal-backdrop.active {
      display: block;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Cracked Tiers Logo">
    <input type="text" id="searchInput" placeholder="Search player...">
  </header>

  <div class="filter-bar" id="filterBar"></div>
  <div class="players-container" id="players-container"></div>

  <div class="modal-backdrop" id="modal-backdrop" onclick="closeModal()"></div>
  <div class="modal" id="modal">
    <img id="modalSkin" src="" alt="skin" style="width:64px;height:64px;">
    <h2 id="modalName"></h2>
    <p id="modalRegion"></p>
    <p id="modalOverall"></p>
    <div id="modalGamemodes"></div>
    <button onclick="closeModal()">Close</button>
  </div>

<script>
const players = [
  { position: 1, name: "Brainless100", region: "AS", overall: 500, gamemodes: { Axe: "Diamond", Nethpot: "Gold", Mace: "Emerald", Tank: "Iron", UHC: "Diamond", Crystal: "Gold" } },
  { position: 2, name: "PvPGod", region: "EU", overall: 320, gamemodes: { Axe: "Iron", Nethpot: "Emerald", Mace: "Gold", Tank: "Diamond", UHC: "Gold", Crystal: "Emerald" } },
  { position: 3, name: "Striker", region: "NA", overall: 210, gamemodes: { Axe: "Gold", Nethpot: "Diamond", Mace: "Iron", Tank: "Emerald", UHC: "Iron", Crystal: "Gold" } }
];

const gamemodeIcons = {
  Axe: "icon/axe.png",
  Nethpot: "icon/nethpot.png",
  Mace: "icon/mace.png",
  Tank: "icon/tank.png",
  UHC: "icon/uhc.png",
  Crystal: "icon/crystal.png"
};

const container = document.getElementById("players-container");
const filterBar = document.getElementById("filterBar");
const filters = ["Overall","Axe","Nethpot","Mace","Tank","UHC","Crystal"];

filters.forEach(f => {
  const btn = document.createElement("div");
  btn.className = "filter-item";
  btn.id = "filter-" + f;
  let count = players.filter(p => f==="Overall" ? true : (p.gamemodes[f]!=="-")).length;
  btn.innerHTML = `${f} <span class="filter-count">${count}</span>`;
  btn.addEventListener("click", () => filterLeaderboard(f));
  filterBar.appendChild(btn);
});

function renderLeaderboard(selectedMode="Overall"){
  container.innerHTML = "";
  let list = [...players];
  if(selectedMode==="Overall"){
    list.sort((a,b)=>b.overall - a.overall);
  } else {
    list.forEach(p => {
      p.highlightMode = p.gamemodes[selectedMode]!=="-";
    });
  }

  list.forEach((player,idx) => {
    const row = document.createElement("div");
    row.className = "player-row";

    if(selectedMode!=="Overall" && player.highlightMode) row.classList.add("highlight");

    const left = document.createElement("div");
    left.className = "player-info";

    let rankText = selectedMode==="Overall" ? 
      (player.overall>=400?"Grand Master":player.overall>=250?"Combat Master":"Combat Ace") 
      : player.gamemodes[selectedMode];

    left.innerHTML = `
      <div class="font-bold text-yellow-400">${player.position}.</div>
      <img src="https://mc-heads.net/avatar/${player.name}/64" alt="${player.name}" class="skin">
      <div class="player-name">
        <div class="name">${player.name} <span class="region">[${player.region}]</span></div>
        ${selectedMode==="Overall"?`<div class="overall">${player.overall} Overall Points</div>`:""}
        <div class="rank">${rankText}</div>
      </div>
    `;

    const right = document.createElement("div");
    right.className = "gamemodes";
    for(const [mode,tier] of Object.entries(player.gamemodes)){
      const gm = document.createElement("div");
      gm.className = "gamemode-item";
      gm.innerHTML = `<img src="${gamemodeIcons[mode]}" alt="${mode}"><span class="tier-badge">${tier}</span>`;
      right.appendChild(gm);
    }

    row.appendChild(left);
    row.appendChild(right);
    container.appendChild(row);

    row.addEventListener("click",()=>openModal(player));
  });
}

renderLeaderboard();

function filterLeaderboard(mode){
  renderLeaderboard(mode);
}

const modal = document.getElementById("modal");
const backdrop = document.getElementById("modal-backdrop");
const modalName = document.getElementById("modalName");
const modalRegion = document.getElementById("modalRegion");
const modalOverall = document.getElementById("modalOverall");
const modalGamemodes = document.getElementById("modalGamemodes");
const modalSkin = document.getElementById("modalSkin");

function openModal(player){
  modalSkin.src = `https://mc-heads.net/avatar/${player.name}/128`;
  modalName.textContent = player.name;
  modalRegion.textContent = `[${player.region}]`;
  modalOverall.textContent = "Overall: " + player.overall + " Points";
  modalGamemodes.innerHTML = "";
  for(const [mode,tier] of Object.entries(player.gamemodes)){
    const gm = document.createElement("div");
    gm.className = "gamemode-item";
    gm.innerHTML = `<img src="${gamemodeIcons[mode]}" alt="${mode}"><span class="tier-badge">${tier}</span>`;
    modalGamemodes.appendChild(gm);
  }
  modal.classList.add("active");
  backdrop.classList.add("active");
}
function closeModal(){
  modal.classList.remove("active");
  backdrop.classList.remove("active");
}

document.getElementById("searchInput").addEventListener("keypress",function(e){
  if(e.key==="Enter"){
    const name = e.target.value.trim();
    const player = players.find(p=>p.name.toLowerCase()===name.toLowerCase());
    if(player) openModal(player);
    else alert("Player not found!");
    e.target.value="";
  }
});
</script>
</body>
</html>
