<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cracked Tiers</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0d0d0d;
  color: white;
}
header {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 60px;
  background: #111;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  z-index: 1000;
}
header img.logo {
  height: 40px;
}
header input {
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  outline: none;
}
#filterBar {
  margin-top: 60px;
  background: #1a1a1a;
  display: flex;
  padding: 10px;
  overflow-x: auto;
}
.filter-item {
  margin-right: 15px;
  cursor: pointer;
  font-weight: bold;
}
.filter-count {
  background: #333;
  padding: 2px 6px;
  border-radius: 10px;
  margin-left: 5px;
  font-size: 12px;
}
#players-container {
  margin-top: 10px;
  padding: 20px;
}
.player-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #1a1a1a;
  margin-bottom: 8px;
  padding: 10px;
  border-radius: 10px;
  cursor: pointer;
}
.player-row.top-1 { border-left: 4px solid gold; }
.player-row.top-2 { border-left: 4px solid silver; }
.player-row.top-3 { border-left: 4px solid #cd7f32; }
.player-info {
  display: flex;
  align-items: center;
}
.player-info img.skin {
  width: 40px; height: 40px;
  border-radius: 8px;
  margin-right: 10px;
}
.player-name .name {
  font-size: 16px;
  font-weight: bold;
}
.region { color: red; margin-left: 5px; }
.overall { font-size: 13px; color: #aaa; }
.rank { font-size: 13px; color: #f5d142; }
.gamemodes {
  display: flex;
  gap: 8px;
}
.gamemode-item {
  display: flex;
  align-items: center;
  background: #222;
  padding: 2px 6px;
  border-radius: 6px;
}
.gamemode-item img {
  width: 20px; height: 20px; margin-right: 4px;
}
.tier-badge { font-size: 12px; }

/* Modal */
#modal-backdrop {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  z-index: 900;
}
#modal {
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  background: #222;
  padding: 20px;
  border-radius: 12px;
  width: 300px;
  display: none;
  z-index: 1000;
}
#modal.active, #modal-backdrop.active { display: block; }
#modal img { width: 80px; border-radius: 8px; }
#modal .name { font-size: 18px; font-weight: bold; }
#modal .region { color: red; }
</style>
</head>
<body>

<header>
  <img src="logo.png" alt="Cracked Tiers" class="logo">
  <input type="text" id="searchInput" placeholder="Search player...">
</header>

<div id="filterBar"></div>

<div id="players-container"></div>

<div id="modal-backdrop" onclick="closeModal()"></div>
<div id="modal">
  <img id="modalSkin" src="">
  <div id="modalName" class="name"></div>
  <div id="modalRegion" class="region"></div>
  <div id="modalOverall"></div>
  <div id="modalGamemodes"></div>
</div>

<script>
// Sample Data
const players = [
  { position:1, name:"Brainless100", region:"AS", overall:480, gamemodes:{Axe:"Diamond",Nethpot:"Gold",Mace:"Emerald",Tank:"Platinum",UHC:"Silver",Crystal:"Diamond"} },
  { position:2, name:"Striker", region:"EU", overall:300, gamemodes:{Axe:"Gold",Nethpot:"Silver",Mace:"Platinum",Tank:"-",UHC:"Gold",Crystal:"Emerald"} },
  { position:3, name:"Shadow", region:"NA", overall:180, gamemodes:{Axe:"Silver",Nethpot:"Bronze",Mace:"-",Tank:"Gold",UHC:"Silver",Crystal:"Silver"} }
];

const gamemodeIcons = {
  Axe: "icon/axe.png",
  Nethpot: "icon/nethpot.png",
  Mace: "icon/mace.png",
  Tank: "icon/tank.png",
  UHC: "icon/uhc.png",
  Crystal: "icon/crystal.png"
};

const container = document.getElementById("players-container");
const filterBar = document.getElementById("filterBar");
const filters = ["Overall","Axe","Nethpot","Mace","Tank","UHC","Crystal"];

// Create filter buttons
filters.forEach(f => {
  const btn = document.createElement("div");
  btn.className = "filter-item";
  btn.id = "filter-" + f;
  let count = players.filter(p => f==="Overall" ? true : (p.gamemodes[f]!=="-")).length;
  btn.innerHTML = `${f} <span class="filter-count">${count}</span>`;
  btn.addEventListener("click", () => filterLeaderboard(f));
  filterBar.appendChild(btn);
});

// Render leaderboard
function renderLeaderboard(selectedMode="Overall"){
  container.innerHTML = "";
  let list = [...players];
  if(selectedMode==="Overall"){
    list.sort((a,b)=>b.overall - a.overall);
  }

  list.forEach((player,idx) => {
    const row = document.createElement("div");
    row.className = "player-row";
    if(idx===0) row.classList.add("top-1");
    else if(idx===1) row.classList.add("top-2");
    else if(idx===2) row.classList.add("top-3");

    const left = document.createElement("div");
    left.className = "player-info";

    // Rank name
    let rankText = selectedMode==="Overall" ? 
      (player.overall>=400?"Grand Master":player.overall>=250?"Combat Master":"Combat Ace") 
      : player.gamemodes[selectedMode];

    left.innerHTML = `
      <div class="font-bold text-yellow-400">${player.position}.</div>
      <img src="https://mc-heads.net/avatar/${player.name}/64" alt="${player.name}" class="skin">
      <div class="player-name">
        <div class="name">${player.name} <span class="region">[${player.region}]</span></div>
        ${selectedMode==="Overall"?`<div class="overall">${player.overall} Overall Points</div>`:""}
        <div class="rank">${rankText}</div>
      </div>
    `;

    const right = document.createElement("div");
    right.className = "gamemodes";
    for(const [mode,tier] of Object.entries(player.gamemodes)){
      const gm = document.createElement("div");
      gm.className = "gamemode-item";
      gm.innerHTML = `<img src="${gamemodeIcons[mode]}" alt="${mode}"><span class="tier-badge">${tier}</span>`;
      right.appendChild(gm);
    }

    row.appendChild(left);
    row.appendChild(right);
    container.appendChild(row);

    row.addEventListener("click",()=>openModal(player));
  });
}

// Initial render
renderLeaderboard();

// Filter click
function filterLeaderboard(mode){
  renderLeaderboard(mode);
}

// Modal
const modal = document.getElementById("modal");
const backdrop = document.getElementById("modal-backdrop");
const modalName = document.getElementById("modalName");
const modalRegion = document.getElementById("modalRegion");
const modalOverall = document.getElementById("modalOverall");
const modalGamemodes = document.getElementById("modalGamemodes");
const modalSkin = document.getElementById("modalSkin");

function openModal(player){
  modalSkin.src = `https://mc-heads.net/avatar/${player.name}/128`;
  modalName.textContent = player.name;
  modalRegion.textContent = `[${player.region}]`;
  modalOverall.textContent = "Overall Points: " + player.overall;
  modalGamemodes.innerHTML = "";
  for(const [mode,tier] of Object.entries(player.gamemodes)){
    const gm = document.createElement("div");
    gm.className = "gamemode-item";
    gm.innerHTML = `<img src="${gamemodeIcons[mode]}" alt="${mode}"><span class="tier-badge">${tier}</span>`;
    modalGamemodes.appendChild(gm);
  }
  modal.classList.add("active");
  backdrop.classList.add("active");
}
function closeModal(){
  modal.classList.remove("active");
  backdrop.classList.remove("active");
}

// Search
document.getElementById("searchInput").addEventListener("keypress",function(e){
  if(e.key==="Enter"){
    const name = e.target.value.trim();
    const player = players.find(p=>p.name.toLowerCase()===name.toLowerCase());
    if(player) openModal(player);
    else alert("Player not found!");
    e.target.value="";
  }
});
</script>
</body>
</html>
